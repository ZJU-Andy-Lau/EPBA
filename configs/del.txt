#!/bin/bash

# ================= 配置区域 =================
# 目标文件夹路径 (请修改这里)
TARGET_DIR="/home/user/test_folder"

# 要删除的文件数量
K=5
# ===========================================

# 1. 检查目录是否存在
if [ ! -d "$TARGET_DIR" ]; then
    echo "错误: 目录 $TARGET_DIR 不存在。"
    exit 1
fi

# 2. 进入目录 (确保只删除该目录下的文件)
cd "$TARGET_DIR" || exit

# 3. 获取前 K 个文件并删除
# 解释: ls -1 (列出文件) | head -n $K (取前K行) | while read (逐行读取处理)
# 这种写法可以处理文件名中包含空格的情况
echo "正在从 $TARGET_DIR 删除前 $K 个文件..."

count=0
# 使用 ls -1dt 可以按时间排序 (最新的在前)，使用 ls -1rt (最旧的在前)
# 默认 ls -1 是按字母顺序
ls -1rt | head -n "$K" | while IFS= read -r file; do
    if [ -f "$file" ]; then
        rm "$file"
        echo "已删除: $file"
        ((count++))
    fi
done

echo "操作完成。"